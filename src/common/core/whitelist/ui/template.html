{% extends "base.html" %}
{% block content %}
    <input type="csrf_token"
           name="csrf_token"
           value="{{ csrf_token }}"
           class="hidden"
           hidden />
    <div class="core-layout">
        {% if is_used and is_metrics %}
            <!-- info-->
            <div class="core-card">
                <h5 class="core-card-title">INFO</h5>
                <div class="core-card-text-container">
                    <p data-info class="core-card-text"></p>
                </div>
            </div>
            <!-- end info -->
            <div class="core-card-metrics">
                <!-- text -->
                <div>
                    <p class="core-card-metrics-name">WHITELIST</p>
                    <h5 data-count class="core-card-title"></h5>
                    <p class="core-card-metrics-subtitle">
                        <span class="core-card-metrics-subtitle-content text-green-500 mx-0.5">request passed</span>
                    </p>
                </div>
                <!-- end text -->
                <!-- icon -->
                <div role="img" class="core-card-svg-container green">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 24 24"
                         fill="currentColor"
                         class="size-base core-card-metrics-svg">
                        <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" />
                    </svg>
                </div>
                <!-- end icon -->
            </div>
            <script nonce="{{script_nonce}}">
    // Use SetupPlugin class that is on static/js/plugins/setup.js
    const setPlugin = new SetupPlugin({
      info: {
        el: document.querySelector("[data-info]"),
        value: "{{ plugin['description'] or ''}}",
        type: "text",
      },
      counter_passed_whitelist: {
        el: document.querySelector("[data-count]"),
        value: "unknown",
        type: "text",
      },
    });
            </script>
        {% else %}
            <div class="core-card">
                <div class="core-card-wrap">
                    <h5 class="core-card-title">Deactivated</h5>
                    <!-- icon -->
                    <div role="img" class="core-card-svg-container">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="1.5"
                             stroke="currentColor"
                             class="core-card-deactivated-svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                        </svg>
                    </div>
                    <!-- end icon -->
                </div>
                <div class="core-card-text-container">
                    <p data-info class="core-card-text">This plugin need to be activated to get metrics.</p>
                </div>
            </div>
            <!-- end info -->
        {% endif %}
    </div>
{% endblock %}
