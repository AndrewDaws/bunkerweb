{% extends "base.html" %}
{% block content %}
    <input type="csrf_token"
           name="csrf_token"
           value="{{ csrf_token }}"
           class="hidden"
           hidden />
    <div class="core-layout">
        {% if is_used and is_metrics %}
            <!-- info-->
            <div class="core-card">
                <h5 class="core-card-title">INFO</h5>
                <div class="core-card-text-container">
                    <p data-info class="core-card-text"></p>
                </div>
            </div>
            <!-- end info -->
            <div data-fetch-success-show class="hidden core-card-list w-large">
                <div class="core-card-list-container">
                    <h5 class="core-card-list-title">LIMIT AND REQUEST LIST</h5>
                </div>
                <div class="core-card-list-container">
                    <!-- list container-->
                    <div class="core-card-list-wrap w-large">
                        <!-- header-->
                        <p class="core-card-list-header col-span-8">URL</p>
                        <p class="core-card-list-header col-span-4">Count</p>
                        <!-- end header-->
                        <!-- list -->
                        <ul class="col-span-12 w-full">
                            <li data-item class="core-card-list-item">
                                <p data-name="url" class="core-card-list-item-content col-span-8"></p>
                                <p data-name="count" class="core-card-list-item-content col-span-4"></p>
                            </li>
                        </ul>
                        <!-- end list-->
                    </div>
                    <!-- end list container-->
                </div>
            </div>
            <script nonce="{{script_nonce}}">
    // Use SetupPlugin class that is on static/js/plugins/setup.js
    const setPlugin = new SetupPlugin({
      info: {
        el: document.querySelector("[data-info]"),
        value: "{{ plugin['description'] or ''}}",
        type: "text",
      },
      items: {
        el: document.querySelector("[data-item]"),
        value: [],
        type: "list",
        listNames: ["url", "count"],
      },
    });
            </script>
        {% else %}
            <div class="core-card">
                <div class="core-card-wrap">
                    <h5 class="core-card-title">Deactivated</h5>
                    <!-- icon -->
                    <div role="img" class="core-card-svg-container">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="1.5"
                             stroke="currentColor"
                             class="core-card-deactivated-svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                        </svg>
                    </div>
                    <!-- end icon -->
                </div>
                <div class="core-card-text-container">
                    <p data-info class="core-card-text">This plugin need to be activated to get metrics.</p>
                </div>
            </div>
            <!-- end info -->
        {% endif %}
    </div>
{% endblock %}
