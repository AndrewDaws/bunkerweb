import{_ as y,o as l,c as i,a as t,i as x,b as _,t as z,d,f as L,l as O,A as k,n as B,F,r as C,k as P,g as b,h as V,w as h,j as N}from"./_plugin-vue_export-helper-8cf34f94.js";import{u as E,_ as q,f as T,c as A}from"./api-c8d35a00.js";import{b as $,_ as D,a as I}from"./Base-7e2e8ada.js";import{_ as U}from"./List-b0b9ba9a.js";import{_ as j}from"./Select-ab98952b.js";import{b as J}from"./plugins-9c6b5ad6.js";const R={},X={class:"fill-green-500 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},G=t("path",{d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"},null,-1),K=[G];function Q(u,s){return l(),i("svg",X,K)}const H=y(R,[["render",Q]]),W={},Y={class:"fill-sky-500 stroke-sky-500 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Z=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"},null,-1),ee=[Z];function te(u,s){return l(),i("svg",Y,ee)}const se=y(W,[["render",te]]),ae={},ne={class:"fill-red-500 h-5 w-5 mr-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},le=t("path",{d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"},null,-1),re=[le];function oe(u,s){return l(),i("svg",ne,re)}const ie=y(ae,[["render",oe]]),ce={},de={class:"fill-gray-600 dark:fill-gray-300 dark:opacity-80 h-3 w-3",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},ue=t("circle",{cx:"50",cy:"50",r:"50"},null,-1),pe=[ue];function fe(u,s){return l(),i("svg",de,pe)}const _e=y(ce,[["render",fe]]),me={},ge={class:"cursor-pointer fill-gray-600 dark:fill-gray-300 dark:opacity-80 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},he=t("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"},null,-1),xe=[he];function ve(u,s){return l(),i("svg",ge,xe)}const ye=y(me,[["render",ve]]),we={class:"mt-2 rounded p-2 w-full bg-gray-100 dark:bg-gray-800"},ke={class:"flex items-center justify-between"},be={class:"text-sm text-slate-700 dark:text-gray-300 mr-4"},$e={class:"text-sm text-slate-700 dark:text-gray-300"},Se={__name:"Feedback",props:{name:{type:String,required:!0},fileSize:{type:String||Number,required:!0},state:{type:String,required:!0},date:{type:Number,required:!0}},emits:["close"],setup(u,{emit:s}){const r=u;return(a,c)=>(l(),i("div",we,[t("div",ke,[r.state==="upload"?(l(),x(se,{key:0})):_("",!0),r.state==="fail"?(l(),x(ie,{key:1})):_("",!0),r.state==="success"?(l(),x(H,{key:2})):_("",!0),t("span",be,z(r.name),1),t("span",$e,z(r.fileSize),1),r.state==="upload"?(l(),x(_e,{key:3})):_("",!0),r.state==="fail"||r.state==="success"?(l(),i("button",{key:4,class:"pl-1 -translate-y-0.5",onClick:c[0]||(c[0]=p=>a.$emit("close",{name:r.name,fileSize:r.fileSize,state:r.state,date:r.date}))},[d(ye)])):_("",!0)])]))}},ze={class:"m-2 mt-6 p-0 col-span-12 grid grid-cols-12"},Le=t("i",{class:"fa-solid fa-cloud-upload-alt"},null,-1),Me=t("p",{class:"dark:text-gray-500 text-sm text-center my-3"}," click or drag and drop ",-1),De={class:"col-span-12"},Be={class:"col-span-12 flex flex-col justify-center items-center mt-4"},Fe=t("hr",{class:"line-separator z-10 w-full"},null,-1),Ce={class:"dark:text-gray-500 text-xs text-center mt-1 mb-2"},He={class:"mx-0.5"},Oe={__name:"Structure",setup(u){const s=L({isDragOn:!1,files:[],count:0});function r(o){const n=s.files.filter(e=>e.date!==o.date);s.files=n}const a=O();function c(o){s.isDragOn=!1,a.files=o.dataTransfer.files;const n=500;for(let e=0;e<a.files.length;e++)setTimeout(()=>m(a.files[e]),n*e)}function p(o){for(let e=0;e<o.length;e++)setTimeout(()=>this.uploadFile(o[e]),500*e)}function m(o){const n=Date.now();let e=o.name;if(e.length>=12){let g=e.split(".");e=g[0].substring(0,13)+"... ."+g[1]}let f=new XMLHttpRequest;f.open("POST","plugins/upload");let w;f.upload.addEventListener("progress",({loaded:g,total:v})=>{let M=Math.floor(v/1e3);M<1024?w=M+" KB":w=(g/(1024*1024)).toFixed(2)+" MB",s.files.push({name:e,fileSize:w,state:"upload",date:n})}),f.addEventListener("readystatechange",()=>{if(f.readyState===XMLHttpRequest.DONE){const g=s.files.findIndex(v=>v.name===e&&v.fileSize===w&&v.state==="upload"&&v.date===n);f.status==201?s.files[g].state="success":s.files[g].state="fail"}});const S=new FormData;S.set("file",o),S.set("csrf_token",document.querySelector("#csrf_token").value),f.send(S)}return(o,n)=>(l(),i("div",ze,[t("form",{id:"dropzone-form",method:"POST",onClick:n[1]||(n[1]=e=>a.value.click()),onDrop:n[2]||(n[2]=k(e=>c(e),["prevent"])),onDragover:n[3]||(n[3]=k(e=>s.isDragOn=!0,["prevent"])),onDragend:n[4]||(n[4]=k(e=>s.isDragOn=!1,["prevent"])),onDragleave:n[5]||(n[5]=k(e=>s.isDragOn=!1,["prevent"])),class:B([[s.isDragOn?"border-solid bg-gray-100 dark:bg-slate-700/50":"border-dashed"],"hover:bg-gray-100 dark:hover:bg-slate-700/50 cursor-pointer col-span-12 border-2 rounded-lg p-2 border-primary dark:brightness-125 drop-zone"])},[t("input",{onChange:n[0]||(n[0]=e=>p(a.value.files)),ref_key:"fileInp",ref:a,type:"file",name:"file",multiple:"multiple",hidden:""},null,544),Le,Me],34),t("div",De,[(l(!0),i(F,null,C(s.files,e=>(l(),x(Se,{name:e.name,fileSize:e.fileSize,state:e.state,date:e.date,onClose:n[6]||(n[6]=f=>r(f))},null,8,["name","fileSize","state","date"]))),256))]),t("div",Be,[Fe,t("p",Ce,[t("span",He,[d(H,{class:"scale-90"})]),P(" uploaded files are directly executed ")])])]))}},Pe={class:"col-span-12 grid grid-cols-12 gap-3 mt-3"},Ve={class:"py-3 min-h-12 relative col-span-12 sm:col-span-6 2xl:col-span-3 p-1 flex justify-between items-center transition rounded bg-gray-100 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-800"},Ne={key:0,class:"flex items-center"},Ee=["href"],qe=t("svg",{class:"h-6 w-6 fill-sky-500 dark dark:brightness-90",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[t("path",{d:"M288 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h50.7L169.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L384 141.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H288zM80 64C35.8 64 0 99.8 0 144V400c0 44.2 35.8 80 80 80H336c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v80c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V144c0-8.8 7.2-16 16-16h80c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"})],-1),Te=[qe],Ae=t("button",{type:"button",class:"z-20 mx-2 inline-block font-bold text-left text-white uppercase align-middle transition-all cursor-pointer text-xs ease-in tracking-tight-rem hover:-translate-y-px"},[t("svg",{class:"h-5 w-5 fill-red-500 dark:brightness-90",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[t("path",{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"})])],-1),Ie={__name:"List",props:{items:{type:Array,required:!0}},setup(u){const s=u;return(r,a)=>(l(),i("div",Pe,[(l(!0),i(F,null,C(s.items,c=>(l(),i("div",Ve,[t("p",{class:B([c.external?"mr-2":"","ml-3 mb-0 transition duration-300 ease-in-out dark:opacity-90 text-left text-sm md:text-base text-slate-700 dark:text-gray-200"])},z(c.name),3),c.external?(l(),i("div",Ne,[c.page?(l(),i("a",{key:0,class:"hover:-translate-y-px",href:c.page},Te,8,Ee)):_("",!0),Ae])):_("",!0)]))),256))]))}},Ue={__name:"Plugins",setup(u){const s=E(),r=L({name:"",type:""}),a=L({isPend:!1,isErr:!1,base:[],total:b(()=>a.base.length),internal:b(()=>a.base.filter(p=>p.external===!1).length),external:b(()=>a.base.filter(p=>p.external===!0).length),setup:b(()=>{const p=JSON.parse(JSON.stringify(a.base));return J(p,r)})});async function c(){await T("/api/global-config","GET",null,a.isPend,a.isErr,s.addFeedback)}return V(async()=>{await c()}),(p,m)=>(l(),x(q,null,{default:h(()=>[d($,{class:"h-fit col-span-12 md:col-span-4 2xl:col-span-3 3xl:col-span-2",label:"info"},{default:h(()=>[d(U,{items:[{label:"plugins total",value:a.total},{label:"plugins internal",value:a.internal},{label:"plugins external",value:a.external}]},null,8,["items"])]),_:1}),d($,{label:"upload",class:"h-fit col-span-12 md:col-span-8 2xl:col-span-4 3xl:col-span-3"},{default:h(()=>[d(Oe)]),_:1}),d($,{class:"z-10 h-fit col-start-1 col-end-13 md:col-start-5 md:col-end-13 2xl:col-span-5 3xl:col-span-4",label:"filter"},{default:h(()=>[d(D,{class:"sm:col-span-6",label:"Search",name:"keyword"},{default:h(()=>[d(I,{onInp:m[0]||(m[0]=o=>r.name=o),settings:{id:"keyword",type:"text",value:"",placeholder:"keyword"}})]),_:1}),d(D,{class:"sm:col-span-6",label:"Plugin type",name:"state"},{default:h(()=>[d(j,{onInp:m[1]||(m[1]=o=>r.external=o==="all"?"all":o==="external"),settings:{id:"state",value:"all",values:["all","internal","external"]}})]),_:1})]),_:1}),!a.isPend&&!a.isErr?(l(),x($,{key:0,class:"h-fit col-span-12",label:"plugin list"},{default:h(()=>[d(Ie,{items:a.setup},null,8,["items"])]),_:1})):_("",!0)]),_:1}))}},je=A();N(Ue).use(je).mount("#app");
