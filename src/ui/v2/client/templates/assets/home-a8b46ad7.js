import{o as n,c as o,a as i,t as v,F as y,r as b,n as C,b as u,d as _,e as S,_ as w,f,g as c,h as H,i as m,w as g,j as z}from"./_plugin-vue_export-helper-8cf34f94.js";import{u as A,_ as E,f as x,c as P}from"./api-c8d35a00.js";const V={class:"card-stat-title"},M={class:"card-stat-count"},N={__name:"Header",props:{name:{type:String,required:!0},count:{type:[Number,String],required:!0}},setup(l){const t=l;return(a,h)=>(n(),o(y,null,[i("p",V,v(t.name?t.name:"none"),1),i("h5",M,v(t.count?t.count:"none"),1)],64))}},B={class:"card-stat-detail-container-item"},q={__name:"Details",props:{detailArr:{type:Array,required:!0}},setup(l){const t=l;return(a,h)=>(n(!0),o(y,null,b(t.detailArr,e=>(n(),o("span",B,[e.num?(n(),o("span",{key:0,class:C([e.numClass?e.numClass:"text-gray-700 dark:text-gray-500"])},v(e.num),3)):u("",!0),e.text?(n(),o("span",{key:1,class:C([e.textClass?e.textClass:"text-gray-700 dark:text-gray-500"])},v(` ${e.text}`),3)):u("",!0)]))),256))}},F=["href"],p={__name:"Structure",props:{href:{type:String,required:!0},name:{type:String,required:!0},count:{type:[Number,String],required:!0},detailArr:{type:Array,required:!0}},setup(l){const t=l;return(a,h)=>(n(),o("a",{href:t.href?t.href:"#",class:"card-stat"},[i("div",null,[_(N,{name:t.name,count:t.count},null,8,["name","count"]),_(q,{detailArr:t.detailArr},null,8,["detailArr"])]),S(a.$slots,"default")],8,F))}},L={},G={class:"dark:brightness-90 inline-block w-12 h-12 text-center rounded-circle bg-secondary"},O=i("svg",{class:"translate-x-0.5 -translate-y-0.5 scale-50 leading-none text-lg relative fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[i("path",{d:"M80 104c13.3 0 24-10.7 24-24s-10.7-24-24-24S56 66.7 56 80s10.7 24 24 24zm80-24c0 32.8-19.7 61-48 73.3v87.8c18.8-10.9 40.7-17.1 64-17.1h96c35.3 0 64-28.7 64-64v-6.7C307.7 141 288 112.8 288 80c0-44.2 35.8-80 80-80s80 35.8 80 80c0 32.8-19.7 61-48 73.3V160c0 70.7-57.3 128-128 128H176c-35.3 0-64 28.7-64 64v6.7c28.3 12.3 48 40.5 48 73.3c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-32.8 19.7-61 48-73.3V352 153.3C19.7 141 0 112.8 0 80C0 35.8 35.8 0 80 0s80 35.8 80 80zm232 0c0-13.3-10.7-24-24-24s-24 10.7-24 24s10.7 24 24 24s24-10.7 24-24zM80 456c13.3 0 24-10.7 24-24s-10.7-24-24-24s-24 10.7-24 24s10.7 24 24 24z"})],-1),T=[O];function j(l,t){return n(),o("div",G,T)}const I=w(L,[["render",j]]),D={},J={class:"dark:brightness-90 inline-block w-12 h-12 text-center rounded-circle bg-red-500"},K=i("svg",{class:"scale-50 leading-none text-lg relative fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[i("path",{d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"})],-1),Q=[K];function R(l,t){return n(),o("div",J,Q)}const U=w(D,[["render",R]]),W={},X={class:"dark:brightness-90 inline-block w-12 h-12 text-center rounded-circle bg-orange-500"},Y=i("svg",{class:"scale-50 leading-none text-lg relative fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[i("path",{d:"M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 21 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"})],-1),Z=[Y];function ee(l,t){return n(),o("div",X,Z)}const te=w(W,[["render",ee]]),se={},ne={class:"inline-block w-12 h-12 text-center rounded-circle bg-yellow-500"},ae=i("svg",{class:"scale-50 -translate-y-1.5 leading-none text-lg relative fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},[i("path",{d:"M96 0C78.3 0 64 14.3 64 32v96h64V32c0-17.7-14.3-32-32-32zM288 0c-17.7 0-32 14.3-32 32v96h64V32c0-17.7-14.3-32-32-32zM32 160c-17.7 0-32 14.3-32 32s14.3 32 32 32v32c0 77.4 55 142 128 156.8V480c0 17.7 14.3 32 32 32s32-14.3 32-32V412.8C297 398 352 333.4 352 256V224c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"})],-1),re=[ae];function ce(l,t){return n(),o("div",ne,re)}const ie=w(se,[["render",ce]]),le={__name:"Home",setup(l){const t=A(),a=f({isPend:!1,isErr:!1,data:[],count:c(()=>a.data.length),up:c(()=>a.data.filter(d=>d.status==="up").length.toString()),down:c(()=>a.data.filter(d=>d.status!=="up").length.toString())});async function h(){await x("/api/instances","GET",null,a,t.addFeedback)}const e=f({isPend:!1,isErr:!1,data:[],num:c(()=>e.data.message),latest:c(()=>e.data.message),isLatest:c(()=>e.num===e.latest)});async function k(){await x("/api/version","GET",null,e,t.addFeedback)}const s=f({isPend:!1,isErr:!1,data:[],num:c(()=>s.data.length),internal:c(()=>s.data.filter(d=>d.external===!1).length),external:c(()=>s.data.filter(d=>d.external===!0).length),services:c(()=>s.isErr||s.isPend||!s.data||s.data.length===0||r.isErr||r.isPend||!r.data||r.data.length===0?[]:JSON.parse(JSON.stringify(r.data.services))),servicesNum:c(()=>Object.keys(s.services).length)}),r=f({isPend:!1,isErr:!1,data:[],services:c(()=>{Object.keys(r.data.services).length})});async function $(){r.isPend=!0,s.isPend=!0,await x("/api/config?methods=1&new_format=1","GET",null,r,t.addFeedback),await x("/api/plugins","GET",null,s,t.addFeedback)}return H(async()=>{await h(),await k(),await $()}),(d,de)=>(n(),m(E,null,{default:g(()=>[!e.isPend&&!e.isErr&&e.data?(n(),m(p,{key:0,href:"#",name:"version",count:e.num||"",detailArr:[{text:e.isLatest?"Latest version":"newer version exists",num:e.isLatest?"":e.latest,textClass:e.isLatest?"text-green-500":"text-yellow-500",numClass:e.isLatest?"text-green-500":"text-yellow-500"}]},{default:g(()=>[_(I)]),_:1},8,["count","detailArr"])):u("",!0),!a.isPend&&!a.isErr&&a.data?(n(),m(p,{key:1,href:"/admin/instances",name:"instances",count:a.count||"0",detailArr:[{text:"up",num:a.up,textClass:"text-green-500",numClass:"text-green-500"},{text:"stop",num:a.down,textClass:"text-red-500",numClass:"text-red-500"}]},{default:g(()=>[_(U)]),_:1},8,["count","detailArr"])):u("",!0),!s.isPend&&!r.isPend&&!s.isErr&&!r.isErr&&s.data?(n(),m(p,{key:2,href:"/admin/services",name:"services",count:s.servicesNum||"0",detailArr:[{text:"",num:"",textClass:"text-green-500",numClass:"text-green-500"}]},{default:g(()=>[_(te)]),_:1},8,["count"])):u("",!0),!r.isPend&&!r.isErr&&r.data?(n(),m(p,{key:3,href:"/admin/plugins",name:"plugins",count:s.num||"0",detailArr:[{text:"internal,",num:s.internal||"0",textClass:"text-sky-500",numClass:"text-sky-500"},{text:"external",num:s.external||"0",textClass:"text-sky-500",numClass:"text-sky-500"}]},{default:g(()=>[_(ie)]),_:1},8,["count","detailArr"])):u("",!0)]),_:1}))}},oe=P();z(le).use(oe).mount("#app");
